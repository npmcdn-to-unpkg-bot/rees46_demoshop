div[class="row row_#{item.id}"]
  .col-md-6
    .row
      .col-md-3
        = link_to image_tag(item.product.image.medium, class: "img-responsive"), product_path(item.product)
      .col-md-3[style="width: 350px;"]
        p= link_to item.product.title, product_path(item.product)
        
  .col-md-2
    - if item.product.size && Product::SIZES.keys[item.product.size].present?
      li= Product::SIZES.keys[item.product.size]
      li= Product.const_get(Product::SIZES.keys[item.product.size].gsub(' ', '_').upcase).keys[item.size_id]
    - elsif item.product.child_ages && Product::AGE_SIZES.keys[item.product.child_ages].present? 
      li= Product::AGE_SIZES.key(item.size_id)
    - elsif item.size_id && Product::PART_TYPES.keys[item.product.part_types[item.size_id.to_i]].present?
    - else
      false
  .col-md-1
    span.qt-minus.remove_single_from_cart_decrement
      = link_to "-  ", decrement_line_item_path(item), remote: true
    span.qt
      div[class="quantity_#{item.id}"]
        = item.quantity
    span.qt-plus
      = link_to "  +", increment_line_item_path(item), remote: true

  .col-md-2
    p.text-right[class="item_total_#{item.id}"] 
      = number_to_currency(item.total_price,  unit: "â‚½ ")
  .col-md-1
    = button_to "X", line_item_path(item), method: :delete, class: "del"
hr

br
br

javascript:
  var cf_see_also = function(data){
    // jQuery code
    if(data.length > 0) {
      $.ajax({
        type: "POST",
        url: 'cart_urls',
        data: {ids: data, recommender: 'see_also'},
      });
      return false;
    } else {
      console.log("Not work or id nil")
      $.ajax({
        type: "POST",
        url: 'cart_urls',
        data: {ids: data, recommender: 'see_also'},
      });
    }
  };
  function afterInitRees46() {
    var cart_product_ids = '#{ProductsInfo.new(@cart.line_items).product_ids_in_cart.to_json.html_safe}'

    REES46.addReadyListener(function () {
      $('.remove_single_from_cart_decrement').click(function () {
        if ($(this).next().text() == 1) {
          REES46.pushData('remove_from_cart', {
            item_id: '#{item.product_id}',
            price: '#{item.product.price}',
            is_available: '#{item.product.available?}',
            categories: '#{item.product.category_id}'
        });
        }
      });
    });

    REES46.addReadyListener(function () {
      $('.remove_single_from_cart_delete').click(function () {
        REES46.pushData('remove_from_cart', {
        item_id: '#{item.product_id}',
        price: '#{item.product.price}',
        is_available: '#{item.product.available?}',
        categories: '#{item.product.category_id}'
      });
      });
    });
    console.log(JSON.parse(cart_product_ids).map(function(el){
      return el.cart
    }));
    REES46.addReadyListener(function () {
      REES46.recommend({
        recommender_type: 'see_also',
        cart: JSON.parse(cart_product_ids).map(function(el){
          return el.cart
        }),
        limit: 4
        }, cf_see_also);
    });
  }
