.container
  .row
    .col-md-10.col-md-offset-1
      h2 Shoping Cart
      .cart-hr
      .row
        .col-md-6
          h5.text-center ITEMS
        .col-md-1
          h5.text-center SIZES
        .col-md-2
          h5.text-right QTY
        .col-md-2
          h5.text-right PRICE
        .col-md-1
          h5.text-right
      hr
      / - @cart.line_items.each do |item|
      /   = render "cart_list", item: item or only one line
      = render partial: "cart_list", collection: @cart.line_items.order(:id), as: :item
      h5.text-right Total  #{number_to_currency(@cart.total_price,  unit: "â‚½ ")}
      br
      br
      .col-md-4.text-center
        = link_to "Continue shopping", root_path, class: "btn btn-primary"
          
        end
      .col-md-4.text-center
        = button_to "Checkout", new_order_path, method: :get, class: "btn btn-success"
      .col-md-4.text-center
        #remove_all_from_cart
          = button_to "Empty cart", @cart, method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-danger"

.clr

#recommender_see_also

javascript:
  var cf_see_also = function(data){
    // jQuery code
    if(data.length > 0) {
      $.ajax({
        type: "POST",
        url: 'get_cart_urls',
        data: {ids: data, recommender: 'see_also'},
      });
      return false;
    } else {
      console.log("Not work or id nil")
      $.ajax({
        type: "POST",
        url: 'get_cart_urls',
        data: {ids: data, recommender: 'see_also'},
      });
    }
  };

  function afterInitRees46() {
    var line_items = '#{ProductsInfo.new(Order.last.line_items).get_cart_products_info.to_json.html_safe}'
    var cart_products_ids = JSON.parse('#{ProductsInfo.new(@cart.line_items).get_cart_products_ids}');
    console.log(line_items)
    console.log(cart_products_ids)
    REES46.addReadyListener(function () {
      $('#remove_all_from_cart').click(function () {
        REES46.pushData('remove_from_cart', JSON.parse(line_items));
      });
    });

    REES46.addReadyListener(function () {
      $('#remove_single_from_cart').click(function () {
        REES46.pushData('remove_from_cart', JSON.parse(line_items));
      });
    });

    REES46.addReadyListener(function () {
      REES46.recommend({
        recommender_type: 'see_also',
        cart: cart_products_ids,
        limit: 4
        }, cf_see_also);
    });
  }
